language: objective-c
cache:
  - bundler
  - cocoapods
rvm: 2.4.3
matrix:
    include:
        - osx_image: xcode10.2
          env: PLATFORM=iOS
          script:
            - make test OS=11.4
            - make test OS=10.3.1
            - make test OS=9.3
        - osx_image: xcode9.4
          env: PLATFORM=OSX
          script:
            - make test
        - osx_image: xcode10.2
          env: PLATFORM=tvOS
          script:
            - make test OS=11.4
            - make test OS=10.2
            - make test OS=9.2
        - osx_image: xcode10.1
          env: MAZE_SDK=12.1 SDK=iphonesimulator12.1
          script: bundle exec maze-runner -c || (cat maze_output/* && exit 1)
install: make bootstrap

before_deploy: make doc

deploy:
  provider: pages
  local_dir: docs # only include the contents of the generated docs dir
  skip_cleanup: true
  github_token: $GITHUB_TOKEN # set in travis-ci dashboard
  on:
    tags: true # only deploy when tag is applied to commit
